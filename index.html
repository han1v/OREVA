<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OREVA OCR â€“ Camera & Image to Text</title>

<!-- OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<!-- Cropper -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.css">
<script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.js"></script>

<style>
body {
  margin: 0;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #0f172a;
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
}

.container {
  width: 90%;
  max-width: 520px;
}

img.logo {
  width: 80px;
  margin-bottom: 16px;
}

button {
  background-color: #2563eb;
  color: white;
  border: none;
  padding: 12px 18px;
  font-size: 15px;
  cursor: pointer;
  border-radius: 6px;
  margin: 6px;
}

textarea {
  width: 100%;
  height: 180px;
  margin-top: 16px;
  padding: 10px;
  border-radius: 6px;
  border: none;
  resize: none;
}

img#preview {
  width: 100%;
  max-height: 70vh;
  margin-top: 12px;
  border-radius: 8px;
}

.hidden {
  display: none;
}

.note {
  margin-top: 12px;
  font-size: 12px;
  opacity: 0.7;
}
</style>
</head>

<body>
<div class="container">

<img src="logo.PNG" class="logo" alt="OREVA logo">
<h1>OREVA OCR</h1>
<p>Scan text using camera or image</p>

<!-- Native camera + file -->
<input type="file" id="imageInput" accept="image/*" capture="environment">

<img id="preview" class="hidden">
<br>

<button id="okBtn" class="hidden">OK â€“ Use This</button>
<button id="extractBtn" class="hidden">Extract Text</button>

<textarea id="output" placeholder="Extracted text will appear here..."></textarea>
<button id="copyBtn">Copy Text</button>

<div class="note">ðŸ”’ All OCR runs in your browser. No images are uploaded.</div>

</div>

<script>
const imageInput = document.getElementById("imageInput");
const preview = document.getElementById("preview");
const okBtn = document.getElementById("okBtn");
const extractBtn = document.getElementById("extractBtn");
const output = document.getElementById("output");

let cropper;
let finalImage;

// When image selected or camera photo taken
imageInput.addEventListener("change", () => {
  const file = imageInput.files[0];
  if (!file) return;

  preview.src = URL.createObjectURL(file);
  preview.classList.remove("hidden");
  okBtn.classList.remove("hidden");

  if (cropper) cropper.destroy();
  cropper = new Cropper(preview, {
    viewMode: 1,
    autoCropArea: 1
  });
});

// Confirm crop
okBtn.addEventListener("click", () => {
  finalImage = cropper.getCroppedCanvas();
  cropper.destroy();
  okBtn.classList.add("hidden");
  extractBtn.classList.remove("hidden");
});

// OCR
extractBtn.addEventListener("click", () => {
  extractBtn.textContent = "Extracting...";
  Tesseract.recognize(finalImage, "eng")
    .then(({ data: { text } }) => {
      output.value = text;
      extractBtn.textContent = "Extract Text";
    });
});

// Copy
document.getElementById("copyBtn").addEventListener("click", () => {
  output.select();
  document.execCommand("copy");
  alert("Text copied!");
});
</script>

</body>
</html>
