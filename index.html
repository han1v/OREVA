<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>OREVA OCR ‚Äì Free Image to Text</title>

<!-- OCR -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>

<!-- Cropper -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.css">
<script src="https://cdn.jsdelivr.net/npm/cropperjs@1.6.1/dist/cropper.min.js"></script>

<!-- PDF -->
<script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@3.11.174/build/pdf.min.js"></script>

<style>
/* üåç System font stack (best UX) */
:root {
  --font-system: system-ui, -apple-system, BlinkMacSystemFont,
                 "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
}

body {
  margin: 0;
  background-color: #0f172a;
  color: white;
  font-family: var(--font-system);
  line-height: 1.5;
}

main {
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.container {
  width: 92%;
  max-width: 520px;
  text-align: center;
  padding: 20px;
}

img.logo {
  width: 78px;
  margin-bottom: 16px;
}

h1 {
  font-size: 1.6rem;
  letter-spacing: 2px;
  margin-bottom: 6px;
}

p.subtitle {
  opacity: 0.9;
  font-size: 0.95rem;
  margin-bottom: 18px;
}

input[type="file"] {
  width: 100%;
  font-size: 1rem;
  margin-bottom: 12px;
}

button {
  width: 100%;
  background-color: #2563eb;
  color: white;
  border: none;
  padding: 14px;
  font-size: 1rem;
  border-radius: 8px;
  margin-top: 10px;
  cursor: pointer;
}

button.secondary {
  background-color: #1e293b;
}

button:disabled {
  background-color: #475569;
  cursor: not-allowed;
}

img#preview {
  width: 100%;
  max-height: 75vh;
  margin-top: 14px;
  border-radius: 10px;
}

textarea {
  width: 100%;
  height: 180px;
  margin-top: 16px;
  padding: 12px;
  border-radius: 8px;
  border: none;
  resize: none;
  font-size: 0.95rem;
  font-family: var(--font-system);
}

.hidden {
  display: none;
}

.note {
  margin-top: 10px;
  font-size: 0.75rem;
  opacity: 0.7;
}

/* üìò About section */
.about {
  background-color: #020617;
  padding: 28px 20px;
}

.about h2 {
  font-size: 1.2rem;
  margin-bottom: 10px;
}

.about p {
  font-size: 0.9rem;
  opacity: 0.85;
  max-width: 700px;
  margin: 0 auto 10px;
}
</style>
</head>

<body>

<main>
<div class="container">

<img src="logo.PNG" class="logo" alt="OREVA logo">

<h1>OREVA OCR</h1>
<p class="subtitle">Camera ‚Ä¢ Gallery ‚Ä¢ Files ‚Ä¢ PDF ‚Üí Text</p>

<input type="file" id="fileInput" accept="image/*,.pdf" capture>

<img id="preview" class="hidden">

<button id="okBtn" class="hidden">OK ‚Äì Use This Image</button>
<button id="extractBtn" class="hidden">Extract Text</button>

<textarea id="output" placeholder="Extracted text will appear here..."></textarea>

<div class="note">
üîí All processing happens in your browser. No files are uploaded.
</div>

</div>
</main>

<!-- ABOUT SECTION -->
<section class="about">
  <h2>About OREVA OCR</h2>
  <p>
    OREVA OCR is a free online tool that converts images and scanned documents
    into editable text directly in your browser.
  </p>
  <p>
    You can scan text using your phone camera, upload images from your gallery,
    select files from your device, or extract text from PDF documents.
  </p>
  <p>
    üîê Privacy first: All OCR processing happens locally on your device.
    No images or documents are uploaded or stored.
  </p>
  <p>
    OREVA OCR is designed for students, professionals, and everyday users
    who need fast and simple text extraction without installing apps.
  </p>
</section>

<script>
const fileInput = document.getElementById("fileInput");
const preview = document.getElementById("preview");
const okBtn = document.getElementById("okBtn");
const extractBtn = document.getElementById("extractBtn");
const output = document.getElementById("output");

let cropper;
let finalImage;

// Handle file / camera / PDF
fileInput.addEventListener("change", async () => {
  const file = fileInput.files[0];
  if (!file) return;

  if (file.type === "application/pdf") {
    const reader = new FileReader();
    reader.onload = async function () {
      const pdf = await pdfjsLib.getDocument(reader.result).promise;
      const page = await pdf.getPage(1);
      const viewport = page.getViewport({ scale: 2 });
      const canvas = document.createElement("canvas");
      const ctx = canvas.getContext("2d");
      canvas.width = viewport.width;
      canvas.height = viewport.height;
      await page.render({ canvasContext: ctx, viewport }).promise;
      preview.src = canvas.toDataURL("image/PNG");
      startCrop();
    };
    reader.readAsArrayBuffer(file);
  } else {
    preview.src = URL.createObjectURL(file);
    startCrop();
  }
});

function startCrop() {
  preview.classList.remove("hidden");
  okBtn.classList.remove("hidden");

  if (cropper) cropper.destroy();
  cropper = new Cropper(preview, {
    viewMode: 1,
    autoCropArea: 1
  });
}

okBtn.addEventListener("click", () => {
  finalImage = cropper.getCroppedCanvas();
  cropper.destroy();
  okBtn.classList.add("hidden");
  extractBtn.classList.remove("hidden");
});

extractBtn.addEventListener("click", () => {
  extractBtn.textContent = "Extracting...";
  Tesseract.recognize(finalImage, "eng")
    .then(({ data: { text } }) => {
      output.value = text;
      extractBtn.textContent = "Extract Text";
    })
    .catch(() => {
      alert("OCR failed. Try a clearer image.");
      extractBtn.textContent = "Extract Text";
    });
});
</script>

</body>
</html>
